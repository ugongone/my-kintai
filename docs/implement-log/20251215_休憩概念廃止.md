## 概要

休憩（`break_start`/`break_end`）の概念を廃止し、`work_start`/`work_end`のペアを1日に複数登録できるように変更した。

### 変更前
```
09:00 work_start
12:00 break_start
13:00 break_end
18:00 work_end
```

### 変更後
```
09:00 work_start  ─┐
12:00 work_end    ─┘ セッション1（3時間）

13:00 work_start  ─┐
18:00 work_end    ─┘ セッション2（5時間）
```

## 実装内容

### 1. 型定義の変更
- `EntryType`: `'work_start' | 'work_end'`のみに
- `WorkStatus`: `'offline' | 'working'`のみに（`'break'`削除）

### 2. バリデーションロジック
- 状態遷移: `work_start` ↔ `work_end`のみ

### 3. 統計計算（dailyStats.ts）
- `DailyStat`からbreakMinutesを削除
- セッション単位で計算・表示

### 4. UI変更

**ダッシュボード:**
- 「休憩開始」「休憩終了」ボタン削除
- 「業務開始」「業務終了」のみに

**月次実績ページ:**
- 休憩時間列を削除
- セッションごとに1行表示（同日に複数行表示される）

### 5. DBマイグレーション
既存の休憩データを変換:
- `break_start` → `work_end`
- `break_end` → `work_start`

### 修正ファイル一覧
| ファイル | 変更内容 |
|----------|----------|
| `src/types/database.ts` | EntryType型修正 |
| `src/lib/utils/validation.ts` | 状態遷移簡素化 |
| `src/lib/utils/workStatus.ts` | WorkStatus型修正、break削除 |
| `src/lib/utils/dailyStats.ts` | セッション単位計算 |
| `src/hooks/useTimeEntries.ts` | addSession/replaceSessionに変更 |
| `src/app/(authenticated)/page.tsx` | 休憩ハンドラー削除 |
| `src/components/dashboard/StatusCard.tsx` | 休憩ボタン削除 |
| `src/components/dashboard/ManualEntryModal.tsx` | 選択肢削除 |
| `src/components/dashboard/RecentHistory.tsx` | breakTime削除 |
| `src/components/history/HistoryTable.tsx` | 休憩列削除 |
| `src/components/history/EditEntryRow.tsx` | 休憩入力欄削除 |
| `src/components/history/AddEntryRow.tsx` | 休憩入力欄削除 |
| `src/app/(authenticated)/history/page.tsx` | API呼び出し変更 |
| `supabase/migrations/20251215000000_remove_break_entries.sql` | データ移行 |
| `docs/technical-specification.md` | 仕様更新 |

## Q&A

### Q1: なぜ休憩概念を廃止したのか？
A: 以下の問題を解決するため:
- 複数の休憩ペアがある場合、編集時に2番目以降の休憩データが消失する問題
- UIが1つの休憩ペアにしか対応していなかった
- シンプルな設計で管理が容易になる

### Q2: セッションとは何か？
A: `work_start`から`work_end`までの1回の稼働単位。1日に複数のセッションを登録可能。

### Q3: 休憩時間はどう計算されるか？
A: セッション間の空白時間として自動計算される。例えば、12:00退勤→13:00出勤の場合、1時間が休憩扱い。

### Q4: 既存データはどうなるか？
A: マイグレーションにより自動変換される:
- `break_start` → `work_end`（休憩開始 = 前のセッション終了）
- `break_end` → `work_start`（休憩終了 = 次のセッション開始）
